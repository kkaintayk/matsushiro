# 松代デジタル回覧板 (Matsushiro) 仕様書

## 1. プロジェクト概要
地域住民向けのデジタル回覧板アプリケーション。従来の回覧板をデジタル化し、「お知らせ」などの情報を迅速かつ確実に住民へ伝達することを目的とする。

## 2. システム構成 (技術スタック)
- **Frontend Framework**: React 19 (Vite)
- **Routing**: React Router DOM v7
- **Styling**: Tailwind CSS, clsx, tailwind-merge
- **Language**: JavaScript (ESModules)
- **Icons**: Lucide React
- **Persistence**: Mock Data Store (In-memory + simulated LocalStorage for settings)

## 3. ユーザー種別と権限
| ユーザー種別 | 役割・権限 | 備考 |
| --- | --- | --- |
| **管理者 (Admin)** | 記事の投稿・削除、住民からの問い合わせ対応、全地域の閲覧 | |
| **住民 (Resident)** | 記事の閲覧、既読処理、管理者への問い合わせ、設定変更 | 全250世帯 (Mock)、5つのブロック(A-E)に所属 |

## 4. 機能要件

### 4.1. 認証・ユーザー管理
- **ログイン機能**: ユーザーID (Resident) または パスワード (Admin) によるログイン。
    - Resident: ID + 4桁PIN
    - Admin: パスワードのみ
- **ブロック管理**: 住民はA〜Eの5つのブロックに分けられ、ブロックごとの情報配信が可能。

### 4.2. ダッシュボード
- **ウェルカムメッセージ**: ログインユーザー名を表示。
- **最新の更新 (Recent Updates)**: 直近1週間以内の投稿をリスト表示（バッジ付き）。
- **カテゴリナビゲーション**: 各種カテゴリへのリンクカード。
- **未読バッジ**: 「お知らせ」カテゴリに未読記事がある場合、件数を表示（住民のみ）。

### 4.3. 回覧板カテゴリ (Information Categories)
1.  **お知らせ (Announcements)** - <span style="color:#E64A19">■ 茜色</span>
    -   松代からのお知らせ。
    -   記事は日付の新しい順に表示。

#### 記事詳細機能
- **多言語対応**: 日本語、英語、中国語、スペイン語でのタイトル・本文表示。
- **既読管理**: 住民が記事を開くと自動的に既読としてマークされる。
- **配信対象フィルタ**: 特定のブロック（例：Aブロックのみ）に向けた投稿が可能。
- **保存期間**: 投稿から3ヶ月を経過した記事は自動的に非表示となる。

### 4.4. コミュニケーション機能
- **問い合わせ (Contact Admin)**:
    -   住民から管理者へのメッセージ送信モーダル。
    -   送信内容：件名、本文。
    -   デザイン：履歴リンクと統一感のあるスタイル（グレー）。
- **メッセージ履歴**:
    -   住民は自分の送信履歴と管理者からの返信を確認可能。
    -   管理者は全住民からのメッセージを一覧・返信可能。

### 4.5. 共通機能・設定
- **多言語UI**: アプリケーション全体の言語切り替え (JA/EN/ZH/ES)。設定はブラウザに保存。
- **文字サイズ変更**: 中/大 の切り替え。設定はブラウザに保存。

### 4.6. PWA機能 (Progressive Web App)
- **マニフェスト (Manifest)**: アプリインストール用のメタデータ設定（名称、アイコン、テーマカラー：#E64A19）。
- **オフライン対応 (Service Worker)**:
    -   Cache First戦略により静的リソース（HTML, CSS, JS, 画像）をキャッシュ。
    -   オフライン環境下でもアプリの起動と基本画面の表示が可能。
- **インストール促進UI (Install Prompt)**:
    -   条件：未インストールかつブラウザがインストール可能と判定した場合のみ表示。
    -   UI：画面下部に「アプリをインストール」カードを固定表示。
    -   頻度制御：ユーザーが「閉じる」を選択した場合、7日間は再表示しない。

## 5. UI/UX デザイン方針
- **視認性**: 高齢者を含む幅広い年代が利用するため、大きな文字と明確なアイコン(Lucide)を使用。
- **和の色彩**: 日本の伝統色をベースにしたモダンなカラーパレットを採用。
- **レスポンシブ**: デスクトップ(2カラム)およびモバイル(1カラム)に対応。
- **インタラクション**: ホバーエフェクトやスムーズな画面遷移による快適な操作感。

## 6. データモデル (Mock)
- **User**: ID, Name, Block, Role
- **Post**: ID, Title (Multi-lang), Content (Multi-lang), Date, Category, ReadBy[], TargetBlocks, Likes
- **Message**: ID, Sender, Date, Content, Replies[], ReadStatus
